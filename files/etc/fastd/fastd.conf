# sources: https://projects.universe-factory.net/projects/fastd/wiki
# docs: http://fastd.readthedocs.org/en/v16/

# Log warnings and errors to stderr
log level warn;

# Log everything to syslog
log to syslog level debug;

# Set the interface name
mode tap;
interface "tbb_fastd";

# Support salsa2012+umac and null methods, prefer salsa2012+umac
#method "null+salsa2012+umac";
method "salsa2012+umac";

secure handshakes yes;

# Bind to a fixed port, IPv4 only
bind any:5001;
#bind any:5001 interface "eth0";

# Public key used by peer
# Secret key generated by `fastd --generate-key`
secret "put here secret-key";

# Set the interface MTU for TAP mode with xsalsa20/aes128 over IPv4 with a base MTU of 1492 (PPPoE)
# 1492-52-14 = 1426 ( PPPoe,IPv4,encrypted)
mtu 1426;


# Include peers from the directory 'peers'
include peers from "peers";

#do not forward pakets between clients
forward no;


#call one script for all. first parameter is the command
on up sync "/etc/fastd/cmd.sh up";
on down sync "/etc/fastd/cmd.sh down";
on connect sync "/etc/fastd/cmd.sh connect";
on establish sync "/etc/fastd/cmd.sh establish";
on disestablish sync "/etc/fastd/cmd.sh disestablish";
on verify sync "/etc/fastd/cmd.sh verify";


